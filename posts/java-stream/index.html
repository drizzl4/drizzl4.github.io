<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Java stream | drizzl4</title>
<meta name=keywords content="Java">
<meta name=description content="Java stream part">
<meta name=author content="drizzl4">
<link rel=canonical href=https://canonical.url/to/page>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.6cba0d81b5f3f42bb578d49f402ba4175aa72b43def148780b8ad714c957c6f5.css integrity="sha256-bLoNgbXz9Cu1eNSfQCukF1qnK0Pe8Uh4C4rXFMlXxvU=" rel="preload stylesheet" as=style>
<link rel=preload href=/apple-touch-icon.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://drizzl4.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=16x16 href=https://drizzl4.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=https://drizzl4.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=apple-touch-icon href=https://drizzl4.github.io/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://drizzl4.github.io/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.87.0">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Java stream">
<meta property="og:description" content="Java stream part">
<meta property="og:type" content="article">
<meta property="og:url" content="https://drizzl4.github.io/posts/java-stream/">
<meta property="og:image" content="https://drizzl4.github.io/%3Cimage%20path/url%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-16T22:40:45+08:00">
<meta property="article:modified_time" content="2021-08-16T22:40:45+08:00"><meta property="og:site_name" content="drizzl4">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://drizzl4.github.io/%3Cimage%20path/url%3E">
<meta name=twitter:title content="Java stream">
<meta name=twitter:description content="Java stream part">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://drizzl4.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Java stream","item":"https://drizzl4.github.io/posts/java-stream/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java stream","name":"Java stream","description":"Java stream part","keywords":["Java"],"articleBody":"基础类 Dish\npublic class Dish { private final String name; private final boolean vegetarian; private final int calories; private final Type type; public Dish(String name, boolean vegetarian, int calories, Type type) { this.name = name; this.vegetarian = vegetarian; this.calories = calories; this.type = type; } public String getName() { return name; } public boolean isVegetarian() { return vegetarian; } public int getCalories() { return calories; } public Type getType() { return type; } @Override public String toString() { return name; } public enum Type { MEAT, FISH, OTHER } } menu\nListDish menu = Arrays.asList( new Dish(\"pork\", false, 800, Dish.Type.MEAT), 3 new Dish(\"beef\", false, 700, Dish.Type.MEAT), new Dish(\"chicken\", false, 400, Dish.Type.MEAT), new Dish(\"french fries\", true, 530, Dish.Type.OTHER), new Dish(\"rice\", true, 350, Dish.Type.OTHER), new Dish(\"season fruit\", true, 120, Dish.Type.OTHER), new Dish(\"pizza\", true, 550, Dish.Type.OTHER), new Dish(\"prawns\", false, 300, Dish.Type.FISH), 5 new Dish(\"salmon\", false, 450, Dish.Type.FISH) ); 基础功能 筛选某一属性 ListDish vegetarianMenu = menu.stream() .filter(Dish::isVegetarian) .collect(toList()); 筛选去重 ListInteger nembers = Arrays.asList(1,2,1,3,3,2,4); numbers.stream() .filter(i - i%2==0) .distinct() .forEach(System.out::println); 限制条数 limit可以用在无序流或者有序流，无序流不会按照任何顺序排序。\nListDish dishes = menu.stream() .filter(d - d.getCalories()  300) .limit(3) .collect(toList()); 跳过前N个元素 ListDish dishes = menu.stream() .filter(d - d.getCalories 300) .skip(2) .collect(toList()); 映射 流的扁平化 例如[“Helllo”,“World”]，将字母去重之后，返回[“H”,“e”,“l”, “o”,“W”,“r”,“d”]\n如果使用：\nwords.stream() .map(word - word.splot(\"\")) .distinct() .collect(toList()); map返回的其实是Stream类型，比较的是Hello与World的不同\n如果使用：\nwords.stream() .map(word - word.split(\"\")) .map(Arrays::stream) .distinct() .collect(toList()); 这代表，map将所有单个的字符转化为一个流，每个流中只存在一个字符\n使用flatMap得到正确结果\nwords.stream() .map(word - word.split(\"\")) .flatMap(Array::stream) .distinct() .collect(Collectors.toList()); flatMap将会将所有单个的流合成一个流\n查找和匹配 使用allMatch、anyMatch、noneMatch、findFirst和findAny方法进行匹配查找\nanyMatch方法 流中是否有一个元素能够匹配给定的谓词\nif(menu.stream().anyMatch(Dish::isVegetarian)){ //anymatch方法返回一个boolean类型 \tSystem.out.println(\"The menu is (somewhat) vegetarian friendly!!\"); } allMatch方法 流中的所有元素是否都能匹配给定的谓词\nboolean isHealthy = menu.stream() .allMatch(d - d.getCalories 1000); noneMatch方法 流中所有元素都无法与给定的谓词匹配\nboolean isHealthy = menu.stream() .noneMatch(d - d.getCalories 1000);  短路求值\n有些操作不需要处理整个流就能得到结果。例如，假设你需要对一个用and连起来的大布 尔表达式求值。不管表达式有多长，你只需找到一个表达式为false，就可以推断整个表达式 将返回false，所以用不着计算整个表达式。这就是短路。\n对于流而言，某些操作(例如allMatch、anyMatch、noneMatch、findFirst和findAny) 不用处理整个流就能得到结果。只要找到一个元素，就可以有结果了。同样，limit也是一个 短路操作:它只需要创建一个给定大小的流，而用不着处理流中所有的元素。在碰到无限大小 的流的时候，这种操作就有用了:它们可以把无限流变成有限流。我们会在5.7节中介绍无限 流的例子。\n findAny方法 返回流中任意元素，一般与其他流操作结合使用，则立即利用短路返回\nOptionalDish dish = menu.stream() .filter(Dish::isVegetarian) .findAny(); 关于Optiona简单介绍  Optiona isPresent()将在Optional包含值的时候返回true, 否则返回false。 ifPresent(Consumerblock)会在值存在的时候执行给定的代码块。Consumer函数式接口让你传递一个接收T类型参数，并返回void的Lambda表达式。\nT get()会在值存在时返回值，否则抛出一个NoSuchElement异常。 T orElse(T other)会在值存在时返回值，否则返回一个默认值。\n例如：\n menu.stream() .filter(Dish::isVegetarian) .findAny() .isPresent(d - System.out.println(d.getName)); findFirst()方法 查找第一个元素，例如List中数据已经排好序，则根据短路返回第一个\nListInteger someNumbers = Arrays.asList(1, 2, 3, 4, 5); OptionalInteger firstSquareDivisibleByThree = someNumbers.stream() .map(x - x*x) .filter(x - x%3 ==0) .findFirst(); findfirst与findAny  你可能会想，为什么会同时有findFirst和findAny呢?答案是并行。找到第一个元素 在并行上限制更多。如果你不关心返回的元素是哪个，请使用findAny，因为它在使用并行流 时限制较少。\n 归约 使用reduce操作来表达更复杂的查询，比如“计算菜单中的总卡路里”或“菜单中卡路里最高的菜是哪一个”。此类查询需要将流中所有元素反复结合起来，得到一个值，比如一个Integer。这样的查询可以被归类为归约操作 (将流归约成一个值)。用函数式编程语言的术语来说，这称为折叠(fold)，因为你可以将这个操 作看成把一张长长的纸(你的流)反复折叠成一个小方块，而这就是折叠操作的结果。\n元素求和 //求和 int sum = numbers.stream().reduce(0, (a, b) - a+b); //相乘 int product = numbers.stream().reduce(1,(a, b) - a*b); Java 8中，Integer类增加sum静态方法来求和\nint sum = numbers.stream().reduce(0, Integer::sum); 无初始值\nOptionalInteger sum = numbers.stream().reduce((a, b) - a+b); 因为可能不存在值，所以返回的为Optional对象。\n最大值和最小值 //最大值 OptionalInteger max = number.stream().reduce(Integer::max); OptionalInteger min = number.stream().reduce(Integer::min); 小总结 数值流 Java 8引入三个原始类型特化流接口，IntStream、DoubleStream、LongStream. 从而避免装箱的成本。\n映射到数值流 通过mapToInt、mapToDouble、mapToLong，例如：\nint calories = menu.stream().mapToInt(Dish::getCalories).sum(); 此处mapToInt并不是返回一个Stream,而是IntStream，最终调用IntStream接口的sum()方法。\n数值流到非特化流 例如：\nIntStream intStream = menu.stream().mapToInt(Dish::getCalories); ListInteger stream = intStream.boxed(); 默认值OptionalInt Optional同样有特化版本：OptionalInt、OptionalDouble和OptionalLong\nOptional maxCalories = menu.stream() .mapToInt(Dish::getCalories) .max(); //如果没有最大值，显式提供一个默认最大值 int max = maxCalories.orElse(1); ","wordCount":"394","inLanguage":"en","image":"https://drizzl4.github.io/%3Cimage%20path/url%3E","datePublished":"2021-08-16T22:40:45+08:00","dateModified":"2021-08-16T22:40:45+08:00","author":{"@type":"Person","name":"drizzl4"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://drizzl4.github.io/posts/java-stream/"},"publisher":{"@type":"Organization","name":"drizzl4","logo":{"@type":"ImageObject","url":"https://drizzl4.github.io/%3Clink%20/%20abs%20url%3E"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://drizzl4.github.io/ accesskey=h title="drizzl4 (Alt + H)">
<img src=/apple-touch-icon.png alt=logo aria-label=logo height=35>drizzl4</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://drizzl4.github.io/archive/ title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://drizzl4.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://drizzl4.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://drizzl4.github.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://drizzl4.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://drizzl4.github.io/posts/>Posts</a></div>
<h1 class=post-title>
Java stream
</h1>
<div class=post-description>
Java stream part
</div>
<div class=post-meta>August 16, 2021&nbsp;·&nbsp;2 min&nbsp;·&nbsp;drizzl4&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/Java%20stream.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<div class=details>Table of Contents</div>
</summary>
<div class=inner><ul>
<li>
<a href=#%e5%9f%ba%e7%a1%80%e7%b1%bb aria-label=基础类>基础类</a></li>
<li>
<a href=#%e5%9f%ba%e7%a1%80%e5%8a%9f%e8%83%bd aria-label=基础功能>基础功能</a><ul>
<li>
<a href=#%e7%ad%9b%e9%80%89%e6%9f%90%e4%b8%80%e5%b1%9e%e6%80%a7 aria-label=筛选某一属性>筛选某一属性</a></li>
<li>
<a href=#%e7%ad%9b%e9%80%89%e5%8e%bb%e9%87%8d aria-label=筛选去重>筛选去重</a></li>
<li>
<a href=#%e9%99%90%e5%88%b6%e6%9d%a1%e6%95%b0 aria-label=限制条数>限制条数</a></li>
<li>
<a href=#%e8%b7%b3%e8%bf%87%e5%89%8dn%e4%b8%aa%e5%85%83%e7%b4%a0 aria-label=跳过前N个元素>跳过前N个元素</a></li></ul>
</li>
<li>
<a href=#%e6%98%a0%e5%b0%84 aria-label=映射>映射</a><ul>
<li>
<a href=#%e6%b5%81%e7%9a%84%e6%89%81%e5%b9%b3%e5%8c%96 aria-label=流的扁平化>流的扁平化</a></li></ul>
</li>
<li>
<a href=#%e6%9f%a5%e6%89%be%e5%92%8c%e5%8c%b9%e9%85%8d aria-label=查找和匹配>查找和匹配</a><ul>
<li>
<a href=#anymatch%e6%96%b9%e6%b3%95 aria-label=anyMatch方法>anyMatch方法</a></li>
<li>
<a href=#allmatch%e6%96%b9%e6%b3%95 aria-label=allMatch方法>allMatch方法</a></li>
<li>
<a href=#nonematch%e6%96%b9%e6%b3%95 aria-label=noneMatch方法>noneMatch方法</a></li>
<li>
<a href=#findany%e6%96%b9%e6%b3%95 aria-label=findAny方法>findAny方法</a><ul>
<li>
<a href=#%e5%85%b3%e4%ba%8eoptiona%e7%ae%80%e5%8d%95%e4%bb%8b%e7%bb%8d aria-label=关于Optiona简单介绍>关于Optiona简单介绍</a></li></ul>
</li>
<li>
<a href=#findfirst%e6%96%b9%e6%b3%95 aria-label=findFirst()方法>findFirst()方法</a><ul>
<li>
<a href=#findfirst%e4%b8%8efindany aria-label=findfirst与findAny>findfirst与findAny</a></li></ul>
</li></ul>
</li>
<li>
<a href=#%e5%bd%92%e7%ba%a6 aria-label=归约>归约</a><ul>
<li>
<a href=#%e5%85%83%e7%b4%a0%e6%b1%82%e5%92%8c aria-label=元素求和>元素求和</a></li>
<li>
<a href=#%e6%9c%80%e5%a4%a7%e5%80%bc%e5%92%8c%e6%9c%80%e5%b0%8f%e5%80%bc aria-label=最大值和最小值>最大值和最小值</a></li></ul>
</li>
<li>
<a href=#%e5%b0%8f%e6%80%bb%e7%bb%93 aria-label=小总结>小总结</a></li>
<li>
<a href=#%e6%95%b0%e5%80%bc%e6%b5%81 aria-label=数值流>数值流</a><ul>
<li>
<a href=#%e6%98%a0%e5%b0%84%e5%88%b0%e6%95%b0%e5%80%bc%e6%b5%81 aria-label=映射到数值流>映射到数值流</a></li>
<li>
<a href=#%e6%95%b0%e5%80%bc%e6%b5%81%e5%88%b0%e9%9d%9e%e7%89%b9%e5%8c%96%e6%b5%81 aria-label=数值流到非特化流>数值流到非特化流</a></li>
<li>
<a href=#%e9%bb%98%e8%ae%a4%e5%80%bcoptionalint aria-label=默认值OptionalInt>默认值OptionalInt</a>
</li>
</ul>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h2 id=基础类>基础类<a hidden class=anchor aria-hidden=true href=#基础类>#</a></h2>
<p>Dish</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dish</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> String name<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>boolean</span> vegetarian<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> calories<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> Type type<span style=color:#f92672>;</span>
<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Dish</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> <span style=color:#66d9ef>boolean</span> vegetarian<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> calories<span style=color:#f92672>,</span> Type type<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
<span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>vegetarian</span> <span style=color:#f92672>=</span> vegetarian<span style=color:#f92672>;</span>
<span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>calories</span> <span style=color:#f92672>=</span> calories<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>type</span> <span style=color:#f92672>=</span> type<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> name<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isVegetarian</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> vegetarian<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getCalories</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> calories<span style=color:#f92672>;</span>
       <span style=color:#f92672>}</span> 
<span style=color:#66d9ef>public</span> Type <span style=color:#a6e22e>getType</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>return</span> type<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
<span style=color:#a6e22e>@Override</span>
<span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>return</span> name<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>enum</span> Type <span style=color:#f92672>{</span> MEAT<span style=color:#f92672>,</span> FISH<span style=color:#f92672>,</span> OTHER <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>menu</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> menu <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>
<span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pork&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 800<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MEAT</span><span style=color:#f92672>),</span> 3 <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dish</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;beef&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 700<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MEAT</span><span style=color:#f92672>),</span>
<span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;chicken&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 400<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MEAT</span><span style=color:#f92672>),</span>
<span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;french fries&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> 530<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OTHER</span><span style=color:#f92672>),</span>
<span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;rice&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> 350<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OTHER</span><span style=color:#f92672>),</span>
<span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;season fruit&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> 120<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OTHER</span><span style=color:#f92672>),</span>
<span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pizza&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> 550<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>OTHER</span><span style=color:#f92672>),</span>
<span style=color:#66d9ef>new</span> Dish<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;prawns&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 300<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>FISH</span><span style=color:#f92672>),</span> 5 <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dish</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;salmon&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> 450<span style=color:#f92672>,</span> Dish<span style=color:#f92672>.</span><span style=color:#a6e22e>Type</span><span style=color:#f92672>.</span><span style=color:#a6e22e>FISH</span><span style=color:#f92672>)</span> <span style=color:#f92672>);</span>
</code></pre></div><h2 id=基础功能>基础功能<a hidden class=anchor aria-hidden=true href=#基础功能>#</a></h2>
<h3 id=筛选某一属性>筛选某一属性<a hidden class=anchor aria-hidden=true href=#筛选某一属性>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> vegetarianMenu <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
								<span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>isVegetarian<span style=color:#f92672>)</span>
                                <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</code></pre></div><h3 id=筛选去重>筛选去重<a hidden class=anchor aria-hidden=true href=#筛选去重>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> nembers <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span>2<span style=color:#f92672>,</span>1<span style=color:#f92672>,</span>3<span style=color:#f92672>,</span>3<span style=color:#f92672>,</span>2<span style=color:#f92672>,</span>4<span style=color:#f92672>);</span>
numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
       <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>i <span style=color:#f92672>-&gt;</span> i<span style=color:#f92672>%</span>2<span style=color:#f92672>==</span>0<span style=color:#f92672>)</span>
       <span style=color:#f92672>.</span><span style=color:#a6e22e>distinct</span><span style=color:#f92672>()</span>
       <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
</code></pre></div><h3 id=限制条数>限制条数<a hidden class=anchor aria-hidden=true href=#限制条数>#</a></h3>
<p>limit可以用在无序流或者有序流，无序流不会按照任何顺序排序。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> dishes <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>d <span style=color:#f92672>-&gt;</span> d<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span><span style=color:#f92672>()</span> <span style=color:#f92672>&gt;</span> 300<span style=color:#f92672>)</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>limit</span><span style=color:#f92672>(</span>3<span style=color:#f92672>)</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</code></pre></div><h3 id=跳过前n个元素>跳过前N个元素<a hidden class=anchor aria-hidden=true href=#跳过前n个元素>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>List<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> dishes <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>d <span style=color:#f92672>-&gt;</span> d<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span> <span style=color:#f92672>&gt;</span>300<span style=color:#f92672>)</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>skip</span><span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</code></pre></div><h2 id=映射>映射<a hidden class=anchor aria-hidden=true href=#映射>#</a></h2>
<h3 id=流的扁平化>流的扁平化<a hidden class=anchor aria-hidden=true href=#流的扁平化>#</a></h3>
<p>例如[&ldquo;Helllo&rdquo;,&ldquo;World&rdquo;]，将字母去重之后，返回[&ldquo;H&rdquo;,&ldquo;e&rdquo;,&ldquo;l&rdquo;, &ldquo;o&rdquo;,&ldquo;W&rdquo;,&ldquo;r&rdquo;,&ldquo;d&rdquo;]<br>
如果使用：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>words<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>word <span style=color:#f92672>-&gt;</span> word<span style=color:#f92672>.</span><span style=color:#a6e22e>splot</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>))</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>distinct</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</code></pre></div><p>map返回的其实是Stream&lt;String[]>类型，比较的是Hello与World的不同<br>
如果使用：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>words<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
	 <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>word <span style=color:#f92672>-&gt;</span> word<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>))</span>
	 <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>::</span>stream<span style=color:#f92672>)</span>
	 <span style=color:#f92672>.</span><span style=color:#a6e22e>distinct</span><span style=color:#f92672>()</span>
	 <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>toList<span style=color:#f92672>());</span>
</code></pre></div><p>这代表，map将所有单个的字符转化为一个流，每个流中只存在一个字符<br>
使用flatMap得到正确结果</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>words<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
	 <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>word <span style=color:#f92672>-&gt;</span> word<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>))</span>
	 <span style=color:#f92672>.</span><span style=color:#a6e22e>flatMap</span><span style=color:#f92672>(</span>Array<span style=color:#f92672>::</span>stream<span style=color:#f92672>)</span>
	 <span style=color:#f92672>.</span><span style=color:#a6e22e>distinct</span><span style=color:#f92672>()</span>
	 <span style=color:#f92672>.</span><span style=color:#a6e22e>collect</span><span style=color:#f92672>(</span>Collectors<span style=color:#f92672>.</span><span style=color:#a6e22e>toList</span><span style=color:#f92672>());</span>
</code></pre></div><p>flatMap将会将所有单个的流合成一个流</p>
<h2 id=查找和匹配>查找和匹配<a hidden class=anchor aria-hidden=true href=#查找和匹配>#</a></h2>
<p>使用allMatch、anyMatch、noneMatch、findFirst和findAny方法进行匹配查找</p>
<h3 id=anymatch方法>anyMatch方法<a hidden class=anchor aria-hidden=true href=#anymatch方法>#</a></h3>
<p>流中是否有一个元素能够匹配给定的谓词</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>anyMatch</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>isVegetarian<span style=color:#f92672>)){</span>
	<span style=color:#75715e>//anymatch方法返回一个boolean类型
</span><span style=color:#75715e></span>	System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;The menu is (somewhat) vegetarian friendly!!&#34;</span><span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><h3 id=allmatch方法>allMatch方法<a hidden class=anchor aria-hidden=true href=#allmatch方法>#</a></h3>
<p>流中的所有元素是否都能匹配给定的谓词</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>boolean</span> isHealthy <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
						<span style=color:#f92672>.</span><span style=color:#a6e22e>allMatch</span><span style=color:#f92672>(</span>d <span style=color:#f92672>-&gt;</span> d<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span> <span style=color:#f92672>&lt;</span>1000<span style=color:#f92672>);</span>
</code></pre></div><h3 id=nonematch方法>noneMatch方法<a hidden class=anchor aria-hidden=true href=#nonematch方法>#</a></h3>
<p>流中所有元素都无法与给定的谓词匹配</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>boolean</span> isHealthy <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
						<span style=color:#f92672>.</span><span style=color:#a6e22e>noneMatch</span><span style=color:#f92672>(</span>d <span style=color:#f92672>-&gt;</span> d<span style=color:#f92672>.</span><span style=color:#a6e22e>getCalories</span> <span style=color:#f92672>&lt;</span>1000<span style=color:#f92672>);</span>
</code></pre></div><blockquote>
<p>短路求值<br>
有些操作不需要处理整个流就能得到结果。例如，假设你需要对一个用and连起来的大布 尔表达式求值。不管表达式有多长，你只需找到一个表达式为false，就可以推断整个表达式 将返回false，所以用不着计算整个表达式。这就是短路。<br>
对于流而言，某些操作(例如allMatch、anyMatch、noneMatch、findFirst和findAny) 不用处理整个流就能得到结果。只要找到一个元素，就可以有结果了。同样，limit也是一个 短路操作:它只需要创建一个给定大小的流，而用不着处理流中所有的元素。在碰到无限大小 的流的时候，这种操作就有用了:它们可以把无限流变成有限流。我们会在5.7节中介绍无限 流的例子。</p>
</blockquote>
<h3 id=findany方法>findAny方法<a hidden class=anchor aria-hidden=true href=#findany方法>#</a></h3>
<p>返回流中任意元素，一般与其他流操作结合使用，则立即利用<strong>短路</strong>返回</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Optional<span style=color:#f92672>&lt;</span>Dish<span style=color:#f92672>&gt;</span> dish <span style=color:#f92672>=</span> 
	menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
		<span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>isVegetarian<span style=color:#f92672>)</span>
		<span style=color:#f92672>.</span><span style=color:#a6e22e>findAny</span><span style=color:#f92672>();</span>
</code></pre></div><h4 id=关于optiona简单介绍>关于Optiona简单介绍<a hidden class=anchor aria-hidden=true href=#关于optiona简单介绍>#</a></h4>
<blockquote>
<p>Optiona
isPresent()将在Optional包含值的时候返回true, 否则返回false。
ifPresent(Consumer block)会在值存在的时候执行给定的代码块。Consumer函数式接口让你传递一个接收T类型参数，并返回void的Lambda表达式。<br>
T get()会在值存在时返回值，否则抛出一个NoSuchElement异常。
T orElse(T other)会在值存在时返回值，否则返回一个默认值。<br>
例如：</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
		 <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>isVegetarian<span style=color:#f92672>)</span>
		 <span style=color:#f92672>.</span><span style=color:#a6e22e>findAny</span><span style=color:#f92672>()</span>
		 <span style=color:#f92672>.</span><span style=color:#a6e22e>isPresent</span><span style=color:#f92672>(</span>d <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>d<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>));</span>
</code></pre></div><h3 id=findfirst方法>findFirst()方法<a hidden class=anchor aria-hidden=true href=#findfirst方法>#</a></h3>
<p>查找第一个元素，例如List中数据已经排好序，则根据短路返回第一个</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> someNumbers <span style=color:#f92672>=</span> Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 5<span style=color:#f92672>);</span>
Optional<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> firstSquareDivisibleByThree <span style=color:#f92672>=</span>
		someNumbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
							 	 <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>x <span style=color:#f92672>-&gt;</span> x<span style=color:#f92672>*</span>x<span style=color:#f92672>)</span>
								 <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>x <span style=color:#f92672>-&gt;</span> x<span style=color:#f92672>%</span>3 <span style=color:#f92672>==</span>0<span style=color:#f92672>)</span>
								 <span style=color:#f92672>.</span><span style=color:#a6e22e>findFirst</span><span style=color:#f92672>();</span>
</code></pre></div><h4 id=findfirst与findany>findfirst与findAny<a hidden class=anchor aria-hidden=true href=#findfirst与findany>#</a></h4>
<blockquote>
<p>你可能会想，为什么会同时有findFirst和findAny呢?答案是并行。找到第一个元素
在并行上限制更多。如果你不关心返回的元素是哪个，请使用findAny，因为它在使用并行流 时限制较少。</p>
</blockquote>
<h2 id=归约>归约<a hidden class=anchor aria-hidden=true href=#归约>#</a></h2>
<p>使用reduce操作来表达更复杂的查询，比如“计算菜单中的总卡路里”或“菜单中卡路里最高的菜是哪一个”。此类查询需要将流中所有元素反复结合起来，得到一个值，比如一个Integer。这样的查询可以被归类为归约操作 (将流归约成一个值)。用函数式编程语言的术语来说，这称为折叠(fold)，因为你可以将这个操
作看成把一张长长的纸(你的流)反复折叠成一个小方块，而这就是折叠操作的结果。</p>
<h3 id=元素求和>元素求和<a hidden class=anchor aria-hidden=true href=#元素求和>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>//求和
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> sum <span style=color:#f92672>=</span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> <span style=color:#f92672>(</span>a<span style=color:#f92672>,</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> a<span style=color:#f92672>+</span>b<span style=color:#f92672>);</span>
<span style=color:#75715e>//相乘
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> product <span style=color:#f92672>=</span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>1<span style=color:#f92672>,(</span>a<span style=color:#f92672>,</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> a<span style=color:#f92672>*</span>b<span style=color:#f92672>);</span>
</code></pre></div><p><img loading=lazy src=https://init.best/post-images/1628737565729.png alt>
Java 8中，Integer类增加sum静态方法来求和</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>int</span> sum <span style=color:#f92672>=</span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> Integer<span style=color:#f92672>::</span>sum<span style=color:#f92672>);</span>
</code></pre></div><p><strong>无初始值</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Optional<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> sum <span style=color:#f92672>=</span> numbers<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>((</span>a<span style=color:#f92672>,</span> b<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> a<span style=color:#f92672>+</span>b<span style=color:#f92672>);</span>
</code></pre></div><p>因为可能不存在值，所以返回的为Optional对象。</p>
<h3 id=最大值和最小值>最大值和最小值<a hidden class=anchor aria-hidden=true href=#最大值和最小值>#</a></h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>//最大值
</span><span style=color:#75715e></span>Optional<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> max <span style=color:#f92672>=</span> number<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>::</span>max<span style=color:#f92672>);</span>
</code></pre></div><p><img loading=lazy src=https://init.best/post-images/1628839778350.png alt>
</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Optional<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> min <span style=color:#f92672>=</span> number<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>(</span>Integer<span style=color:#f92672>::</span>min<span style=color:#f92672>);</span>
</code></pre></div><h2 id=小总结>小总结<a hidden class=anchor aria-hidden=true href=#小总结>#</a></h2>
<p><img loading=lazy src=https://init.best/post-images/1628878254005.png alt>
</p>
<h2 id=数值流>数值流<a hidden class=anchor aria-hidden=true href=#数值流>#</a></h2>
<p>Java 8引入三个原始类型特化流接口，IntStream、DoubleStream、LongStream. 从而避免装箱的成本。</p>
<h3 id=映射到数值流>映射到数值流<a hidden class=anchor aria-hidden=true href=#映射到数值流>#</a></h3>
<p>通过mapToInt、mapToDouble、mapToLong，例如：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>int</span> calories <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>mapToInt</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>getCalories<span style=color:#f92672>).</span><span style=color:#a6e22e>sum</span><span style=color:#f92672>();</span>
</code></pre></div><p>此处mapToInt并不是返回一个Stream,而是IntStream，最终调用IntStream接口的sum()方法。</p>
<h3 id=数值流到非特化流>数值流到非特化流<a hidden class=anchor aria-hidden=true href=#数值流到非特化流>#</a></h3>
<p>例如：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>IntStream intStream <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>mapToInt</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>getCalories<span style=color:#f92672>);</span>
List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> stream  <span style=color:#f92672>=</span> intStream<span style=color:#f92672>.</span><span style=color:#a6e22e>boxed</span><span style=color:#f92672>();</span>
</code></pre></div><h3 id=默认值optionalint>默认值OptionalInt<a hidden class=anchor aria-hidden=true href=#默认值optionalint>#</a></h3>
<p>Optional同样有特化版本：OptionalInt、OptionalDouble和OptionalLong</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Optional maxCalories <span style=color:#f92672>=</span> menu<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                            <span style=color:#f92672>.</span><span style=color:#a6e22e>mapToInt</span><span style=color:#f92672>(</span>Dish<span style=color:#f92672>::</span>getCalories<span style=color:#f92672>)</span>
                            <span style=color:#f92672>.</span><span style=color:#a6e22e>max</span><span style=color:#f92672>();</span>
<span style=color:#75715e>//如果没有最大值，显式提供一个默认最大值
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> max <span style=color:#f92672>=</span> maxCalories<span style=color:#f92672>.</span><span style=color:#a6e22e>orElse</span><span style=color:#f92672>(</span>1<span style=color:#f92672>);</span>
</code></pre></div>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://drizzl4.github.io/tags/java/>Java</a></li>
</ul>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share Java stream on twitter" href="https://twitter.com/intent/tweet/?text=Java%20stream&url=https%3a%2f%2fdrizzl4.github.io%2fposts%2fjava-stream%2f&hashtags=Java"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Java stream on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fdrizzl4.github.io%2fposts%2fjava-stream%2f&title=Java%20stream&summary=Java%20stream&source=https%3a%2f%2fdrizzl4.github.io%2fposts%2fjava-stream%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Java stream on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdrizzl4.github.io%2fposts%2fjava-stream%2f&title=Java%20stream"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Java stream on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdrizzl4.github.io%2fposts%2fjava-stream%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Java stream on whatsapp" href="https://api.whatsapp.com/send?text=Java%20stream%20-%20https%3a%2f%2fdrizzl4.github.io%2fposts%2fjava-stream%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Java stream on telegram" href="https://telegram.me/share/url?text=Java%20stream&url=https%3a%2f%2fdrizzl4.github.io%2fposts%2fjava-stream%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://drizzl4.github.io/>drizzl4</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>